<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BIZ Level Up Dashboard | Live Performance</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Inter:wght@400;700;900&display=swap');
        body{background-color:#020617;font-family:'Inter',sans-serif;color:white;overflow-x:hidden;}
        .header-font{font-family:'Orbitron',sans-serif;}
        .glass{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.1);backdrop-filter:blur(10px);}
        .conqueror-tier{background:linear-gradient(90deg,rgba(239,68,68,0.15) 0%,rgba(239,68,68,0) 100%);border-left:4px solid #ef4444;}
        .gold-tier{background:linear-gradient(90deg,rgba(234,179,8,0.1) 0%,rgba(234,179,8,0) 100%);border-left:4px solid #eab308;}
        .orange-tier{background:linear-gradient(90deg,rgba(249,115,22,0.1) 0%,rgba(249,115,22,0) 100%);border-left:4px solid #f97316;}
        .blue-tier{border-left:4px solid #3b82f6;}
        .slate-tier{border-left:4px solid #475569;opacity:0.8;}
        .live-pulse{width:10px;height:10px;background:#ef4444;border-radius:50%;display:inline-block;margin-right:10px;animation:pulse 1.5s infinite;}
        @keyframes pulse{0%{transform:scale(1);opacity:1}50%{transform:scale(1.5);opacity:0.5}100%{transform:scale(1);opacity:1}}
        .gold-progress{background:linear-gradient(90deg,#ca8a04,#facc15,#eab308);box-shadow:0 0 15px rgba(234,179,8,0.4);}
        .tab-active{background:rgba(59,130,246,0.2);border-color:#3b82f6!important;color:white!important;border-bottom:2px solid #3b82f6;}
        .spin-anim{animation:spin 1s linear;}
        @keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
        .prbb-card{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.1);backdrop-filter:blur(10px);border-bottom:4px solid #8b5cf6;}
        .prbb-divider{width:1px;background:rgba(255,255,255,0.12);align-self:stretch;margin:4px 0;}
        #day-sub-tabs-container{display:flex;gap:6px;flex-wrap:wrap;}
        .day-sub-tab{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.1);border-radius:10px;padding:6px 14px;font-size:10px;font-weight:900;text-transform:uppercase;letter-spacing:0.1em;color:#475569;cursor:pointer;transition:all 0.2s;}
        .day-sub-tab:hover{color:#94a3b8;background:rgba(255,255,255,0.06);}
        .day-sub-tab.is-today{color:#3b82f6;border-color:rgba(59,130,246,0.4);}
        .day-sub-tab.is-today.active{background:rgba(59,130,246,0.15);border-color:#3b82f6;color:#93c5fd;}
        .day-sub-tab.is-history{color:#64748b;border-color:rgba(71,85,105,0.4);}
        .day-sub-tab.is-history.active{background:rgba(234,179,8,0.15);border-color:#eab308;color:#facc15;}
        .history-dot{display:inline-block;width:5px;height:5px;background:#22c55e;border-radius:50%;margin-left:4px;vertical-align:middle;}
        .history-banner{background:rgba(234,179,8,0.08);border:1px solid rgba(234,179,8,0.25);border-radius:12px;padding:8px 14px;font-size:10px;font-weight:900;text-transform:uppercase;letter-spacing:0.1em;color:#eab308;text-align:center;}
        .modal-overlay{position:fixed;inset:0;background:rgba(2,6,23,0.92);backdrop-filter:blur(12px);z-index:9999;display:flex;align-items:center;justify-content:center;}
        .modal-box{background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.12);border-radius:24px;padding:40px 32px;width:90%;max-width:380px;text-align:center;}
        .pw-input{width:100%;background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.15);border-radius:12px;color:white;font-size:1.1rem;padding:14px 18px;outline:none;text-align:center;letter-spacing:0.2em;font-family:'Orbitron',sans-serif;margin:20px 0 8px;transition:border-color 0.2s;}
        .pw-input:focus{border-color:#eab308;}.pw-input.error{border-color:#ef4444;animation:shake 0.4s;}
        @keyframes shake{0%,100%{transform:translateX(0)}20%,60%{transform:translateX(-8px)}40%,80%{transform:translateX(8px)}}
        .pw-btn{width:100%;padding:14px;border-radius:12px;font-family:'Orbitron',sans-serif;font-weight:900;font-size:0.85rem;letter-spacing:0.15em;text-transform:uppercase;background:linear-gradient(90deg,#ca8a04,#facc15,#eab308);color:#020617;border:none;cursor:pointer;margin-top:8px;transition:opacity 0.2s,transform 0.1s;}
        .pw-btn:hover{opacity:0.9;}.pw-btn:active{transform:scale(0.97);}
        .pw-cancel{margin-top:12px;background:none;border:none;color:#475569;font-size:0.8rem;cursor:pointer;text-transform:uppercase;letter-spacing:0.1em;font-weight:700;}
        .pw-cancel:hover{color:#94a3b8;}.error-msg{color:#ef4444;font-size:0.78rem;font-weight:700;letter-spacing:0.05em;min-height:18px;}
        .lookup-input{width:100%;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.15);border-radius:14px;color:white;font-size:1rem;padding:16px 20px;outline:none;font-family:'Inter',sans-serif;transition:border-color 0.2s,box-shadow 0.2s;}
        .lookup-input:focus{border-color:#3b82f6;box-shadow:0 0 0 3px rgba(59,130,246,0.15);}
        .lookup-input::placeholder{color:#475569;}
        .lookup-btn{width:100%;padding:18px;border-radius:14px;font-family:'Orbitron',sans-serif;font-weight:900;font-size:0.82rem;letter-spacing:0.14em;text-transform:uppercase;background:linear-gradient(90deg,#1a56db,#2563eb,#3b82f6);color:white;border:none;cursor:pointer;transition:opacity 0.2s,transform 0.1s;box-shadow:0 0 25px rgba(59,130,246,0.35);}
        .lookup-btn:hover{opacity:0.9;}.lookup-btn:active{transform:scale(0.97);}
        .site-btn{display:flex;flex-direction:column;align-items:center;gap:5px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.08);border-radius:12px;padding:12px 4px;cursor:pointer;transition:background 0.2s;width:100%;border-width:1px;}
        .site-btn:hover{background:rgba(255,255,255,0.09);}
        .site-btn span{font-size:9px;font-weight:900;text-transform:uppercase;letter-spacing:0.08em;color:#64748b;}
        .search-history-item{background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.08);border-radius:10px;padding:10px 14px;cursor:pointer;transition:all 0.2s;display:flex;justify-content:space-between;align-items:center;}
        .search-history-item:hover{background:rgba(255,255,255,0.05);}
        @keyframes fadeSlideIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
        @media(min-width:1024px){.main-container{max-width:1200px!important;}.leaderboard-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px;}.stat-card{padding:30px!important;}.stat-value{font-size:3rem!important;}}
    </style>
</head>
<body class="p-4 pb-20">

<div id="pw-modal" class="modal-overlay hidden">
    <div class="modal-box">
        <div class="header-font text-xs text-yellow-500 tracking-widest uppercase mb-2 italic">Access Required</div>
        <div class="header-font text-2xl font-black text-white uppercase italic tracking-tight">Weekly Rankings</div>
        <p class="text-slate-400 text-sm mt-3">Enter your access code to view the weekly leaderboard.</p>
        <input id="pw-input" type="password" class="pw-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" onkeydown="if(event.key==='Enter')checkPassword()" autocomplete="off"/>
        <div id="pw-error" class="error-msg"></div>
        <button class="pw-btn" onclick="checkPassword()"><i class="fas fa-unlock mr-2"></i>Unlock</button><br>
        <button class="pw-cancel" onclick="cancelPassword()">Cancel</button>
    </div>
</div>

<div class="main-container max-w-lg mx-auto transition-all duration-500">

    <div class="flex justify-between items-center mb-8 px-2">
        <div class="flex items-center">
            <span class="live-pulse"></span>
            <div class="flex flex-col">
                <span class="text-[10px] md:text-xs font-black tracking-widest text-red-500 uppercase italic leading-none">Live System Performance</span>
                <span id="timestamp" class="text-[8px] md:text-sm text-slate-500 font-bold uppercase mt-1">Syncing Data...</span>
            </div>
        </div>
        <button onclick="updateDashboard()" id="refresh-btn" class="glass p-3 px-4 rounded-xl hover:bg-white/10 transition-all active:scale-95">
            <i class="fas fa-sync-alt text-sm text-blue-400"></i>
        </button>
    </div>

    <div class="text-center mb-10">
        <h1 class="header-font text-4xl md:text-6xl font-black tracking-tighter bg-gradient-to-r from-yellow-400 via-orange-500 to-red-600 bg-clip-text text-transparent italic leading-tight uppercase">BIZ Level Up Dashboard</h1>
    </div>

    <div class="flex gap-2 mb-4 px-2 max-w-2xl mx-auto">
        <button onclick="switchTab('daily')"    id="tab-daily"    class="flex-1 glass py-3 rounded-xl text-[10px] md:text-sm font-black uppercase tracking-widest transition-all tab-active">Daily</button>
        <button onclick="switchTab('lookup')"   id="tab-lookup"   class="flex-1 glass py-3 rounded-xl text-[10px] md:text-sm font-black uppercase tracking-widest transition-all text-slate-500"><i class="fas fa-search text-[9px] mr-1 opacity-60"></i>Lookup</button>
        <button onclick="switchTab('playbook')" id="tab-playbook" class="flex-1 glass py-3 rounded-xl text-[10px] md:text-sm font-black uppercase tracking-widest transition-all text-slate-500">Playbook</button>
        <button onclick="switchTab('prank')"    id="tab-prank"    class="flex-1 glass py-3 rounded-xl text-[10px] md:text-sm font-black uppercase tracking-widest transition-all text-slate-500" style="color:#a855f7;">üö® Prank</button>
        <button onclick="requestWeekly()"       id="tab-weekly"   class="flex-1 glass py-3 rounded-xl text-[10px] md:text-sm font-black uppercase tracking-widest transition-all text-slate-500"><i class="fas fa-lock text-[9px] mr-1 opacity-60"></i>Weekly</button>
    </div>

    <div id="day-sub-tabs-wrapper" class="hidden px-2 mb-5 max-w-2xl mx-auto">
        <div id="day-sub-tabs-container"></div>
    </div>

    <!-- LEADERBOARD -->
    <div id="leaderboard-view">
        <div id="history-banner" class="hidden mx-2 mb-4">
            <div class="history-banner"><i class="fas fa-history mr-2"></i><span id="history-banner-text"></span></div>
        </div>
        <div class="mb-10 px-2 max-w-3xl mx-auto">
            <div class="flex justify-between items-end mb-3">
                <span id="goal-label" class="text-xs md:text-sm font-black text-yellow-500 uppercase italic tracking-widest">Daily Team Goal</span>
                <span id="goal-percent" class="text-xs md:text-sm font-black text-white uppercase italic">0%</span>
            </div>
            <div class="w-full h-6 bg-white/5 rounded-full overflow-hidden border border-white/10 p-[3px]">
                <div id="progress-bar" class="gold-progress h-full rounded-full transition-all duration-1000" style="width:0%"></div>
            </div>
            <div class="flex justify-between mt-2 px-1">
                <span id="current-leads-sum" class="text-xs font-bold text-slate-400">0 Leads</span>
                <span id="target-display" class="text-xs font-bold text-slate-400">Target: 150</span>
            </div>
        </div>
        <div class="grid grid-cols-4 gap-2 mb-10 px-2">
            <div class="glass p-3 md:p-8 rounded-3xl border-b-4 border-b-yellow-500 text-center stat-card">
                <div class="text-[9px] md:text-sm font-black text-yellow-500 uppercase mb-2 leading-tight">12+ Proof</div>
                <div id="master-count" class="text-2xl md:text-6xl font-black text-white stat-value">00</div>
            </div>
            <div class="glass p-3 md:p-8 rounded-3xl border-b-4 border-b-green-500 text-center stat-card">
                <div class="text-[9px] md:text-sm font-black text-green-500 uppercase mb-2 leading-tight">Active Reps</div>
                <div id="active-reps" class="text-2xl md:text-6xl font-black text-white stat-value">0</div>
            </div>
            <div class="glass p-3 md:p-8 rounded-3xl border-b-4 border-b-blue-500 text-center stat-card">
                <div class="text-[9px] md:text-sm font-black text-blue-500 uppercase mb-2 leading-tight">Floor Total</div>
                <div id="floor-total" class="text-2xl md:text-6xl font-black text-white stat-value">0</div>
            </div>
            <div class="prbb-card p-3 md:p-8 rounded-3xl text-center stat-card">
                <div class="text-[9px] md:text-sm font-black text-purple-400 uppercase mb-2 leading-tight">PR / BB</div>
                <div class="flex items-stretch justify-center gap-2">
                    <div class="flex-1 flex flex-col items-center">
                        <div class="text-[8px] font-black text-slate-500 uppercase tracking-wider mb-1">Prov</div>
                        <div id="pr-count" class="text-xl md:text-4xl font-black leading-none" style="color:#a78bfa">0</div>
                    </div>
                    <div class="prbb-divider"></div>
                    <div class="flex-1 flex flex-col items-center">
                        <div class="text-[8px] font-black text-slate-500 uppercase tracking-wider mb-1">Berb</div>
                        <div id="bb-count" class="text-xl md:text-4xl font-black leading-none" style="color:#c084fc">0</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="flex justify-between items-end mb-6 px-4">
            <h2 id="ranking-title" class="header-font text-xs md:text-lg font-black tracking-widest text-slate-500 uppercase italic">Live Rankings</h2>
            <div id="day-indicator" class="text-xs md:text-sm text-blue-500 font-bold uppercase italic">Updating...</div>
        </div>
        <div id="leaderboard" class="leaderboard-grid space-y-3 md:space-y-0 px-2"></div>
    </div>

    <!-- LOOKUP -->
    <div id="lookup-view" class="hidden px-2 pb-20 space-y-5">
        <div class="glass p-6 rounded-3xl border-t-4 border-t-blue-500">
            <div class="flex items-center gap-3 mb-3">
                <div class="w-9 h-9 rounded-xl flex items-center justify-center" style="background:rgba(59,130,246,0.15);border:1px solid rgba(59,130,246,0.3);">
                    <i class="fab fa-google text-blue-400 text-sm"></i>
                </div>
                <div>
                    <div class="header-font text-xs text-blue-500 uppercase tracking-widest italic">Business Intelligence</div>
                    <div class="header-font text-lg font-black text-white uppercase italic">Lead Lookup</div>
                </div>
            </div>
            <p class="text-slate-500 text-xs mb-5 leading-relaxed">
                Type a phone number or business name ‚Äî opens <strong class="text-white">Google AI</strong> in a new tab asking for the business name, owner, address, and email.
            </p>
            <div class="space-y-3">
                <input id="lookup-input" type="text" class="lookup-input"
                    placeholder="e.g. (716) 771-6522 or Business Name..."
                    onkeydown="if(event.key==='Enter')runLookup()"
                    autocomplete="off"/>

                <button onclick="runLookup()" class="lookup-btn">
                    <i class="fab fa-google mr-2"></i>Open Google AI ‚Äî Search Now
                </button>

                <button onclick="clearLookup()" style="width:100%;background:none;border:none;color:#334155;font-size:10px;font-weight:900;text-transform:uppercase;letter-spacing:0.1em;cursor:pointer;padding:4px;" onmouseover="this.style.color='#64748b'" onmouseout="this.style.color='#334155'">
                    <i class="fas fa-times" style="margin-right:4px;"></i>Clear
                </button>
            </div>
        </div>

        <div id="lookup-prank-result" class="hidden"></div>

        <div id="lookup-history-section" class="hidden">
            <div class="flex justify-between items-center mb-3 px-1">
                <span class="text-[10px] font-black text-slate-600 uppercase tracking-widest">Recent Lookups</span>
                <button onclick="clearHistory()" class="text-[10px] font-black text-slate-700 hover:text-red-500 uppercase tracking-widest transition-colors">Clear All</button>
            </div>
            <div id="lookup-history" class="space-y-2"></div>
        </div>
    </div>

    <!-- PLAYBOOK -->
    <div id="playbook-view" class="hidden space-y-6 px-2 pb-20">

        <!-- QUALITY GUIDELINES -->
        <div class="glass p-6 rounded-3xl border-l-8 border-l-green-500 bg-green-500/5">
            <h3 class="header-font text-sm md:text-xl font-black text-green-500 uppercase mb-4 italic">Quality Guidelines</h3>
            <div class="text-sm md:text-lg leading-relaxed text-slate-200 space-y-3">
                <p>1. Need to be in business for over 1 Year</p>
                <p>2. Primary Owner of the business 100% or at least 50%</p>
                <p>3. No Trucking Companies, No Van</p>
                <p>4. No attorneys, No Lawyers</p>
                <div class="pl-4 border-l-2 border-white/10 mt-4 space-y-2 text-white font-bold">
                    <p>‚Ä¢ Over 1 million ‚Äî Line for transfer</p>
                    <p>‚Ä¢ Under 1 million (200k minimum) ‚Äî Line for transfer</p>
                </div>
                <p class="text-red-400 font-black italic mt-6 border-t border-red-900/50 pt-4 uppercase text-center">If qualifiers are not met you cannot transfer!!!</p>
            </div>
        </div>

        <!-- REBUTTALS -->
        <div class="glass p-6 rounded-3xl border-l-8 border-l-red-500 bg-red-500/5">
            <h3 class="header-font text-sm md:text-xl font-black text-red-500 uppercase mb-4 italic">Rebuttals</h3>
            <div class="text-sm md:text-lg leading-relaxed text-slate-300 space-y-6">
                <div><p class="text-white font-black italic text-lg">"Which company do you represent?"</p><p class="text-slate-400 italic">"We're the Business Loan Division. We help connect business owners to the right lending programs through our partner network."</p></div>
                <div><p class="text-white font-black italic text-lg">"Is this a scam?"</p><p class="text-slate-400 italic">"I understand the concern. This is a legitimate outreach from the Business Loan Division in California. We work only with licensed financial institutions. My part is to confirm basic details."</p></div>
                <div><p class="text-white font-black italic text-lg">"Can you email me something first?"</p><p class="text-slate-400 italic">"Once I connect you with the senior advisor, they can send you all the information directly. I just need to confirm your business details first."</p></div>
                <div><p class="text-white font-black italic text-lg">"Why are you calling me and not emailing first?"</p><p class="text-slate-400 italic">"Phone is the quickest way to confirm eligibility and make sure the right person gets connected. It only takes a minute."</p></div>
                <div><p class="text-white font-black italic text-lg">"Are You a Bank?"</p><p class="text-slate-400 italic">"No, we're a direct private lender. We work with business-funding programs that provide working capital and lines of credit directly."</p></div>
            </div>
        </div>

        <!-- MICRO-TRUST TIPS -->
        <div class="glass p-6 rounded-3xl border-l-8 border-l-blue-500 bg-blue-500/5">
            <h3 class="header-font text-sm md:text-xl font-black text-blue-500 uppercase mb-4 italic">Micro-Trust Tips</h3>
            <div class="text-sm md:text-lg leading-relaxed text-slate-200">
                <p class="mb-4 italic">After every 2 questions, give a short acknowledgment phrase like:</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-3 text-blue-300 font-black italic text-center">
                    <p class="glass p-3 rounded-xl">"Perfect, thank you."</p>
                    <p class="glass p-3 rounded-xl">"Got it, that helps."</p>
                    <p class="glass p-3 rounded-xl">"That's great to know."</p>
                </div>
                <p class="mt-6 text-xs text-slate-500 uppercase font-black tracking-widest text-center">Keep the rhythm human and build micro-trust.</p>
            </div>
        </div>
    </div>


    <!-- PRANK TAB -->
    <div id="prank-view" class="hidden space-y-5 px-2 pb-20">

        <!-- MEXICO WARNING -->
        <div style="border-radius:20px;overflow:hidden;border:3px solid #ef4444;box-shadow:0 0 40px rgba(239,68,68,0.4);">
            <div style="background:linear-gradient(135deg,rgba(239,68,68,0.35),rgba(185,28,28,0.5));padding:20px 22px;position:relative;overflow:hidden;">
                <div style="position:absolute;inset:0;background:repeating-linear-gradient(45deg,transparent,transparent 10px,rgba(239,68,68,0.07) 10px,rgba(239,68,68,0.07) 20px);"></div>
                <div style="position:relative;">
                    <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px;">
                        <span style="font-size:1.6rem;">üá≤üáΩ</span>
                        <div>
                            <div style="font-family:Orbitron,sans-serif;font-size:11px;font-weight:900;text-transform:uppercase;letter-spacing:0.15em;color:#ef4444;">‚ö†Ô∏è ACTIVE ONGOING SCAM ‚Äî END CALL PROFESSIONALLY &amp; MOVE ON</div>
                            <div style="font-family:Orbitron,sans-serif;font-size:16px;font-weight:900;text-transform:uppercase;color:white;margin-top:2px;">Mexico / Fund Transfer Alert</div>
                        </div>
                    </div>
                    <p style="color:#fca5a5;font-size:14px;font-weight:700;line-height:1.6;">
                        If anyone on a call <span style="color:white;font-weight:900;">mentions Mexico</span>, asks to <span style="color:white;font-weight:900;">send funds to Mexico</span>, or requests any <span style="color:white;font-weight:900;">international money transfer</span> ‚Äî this is a <span style="color:#ef4444;font-weight:900;">confirmed prank / scam</span>. Do not engage further.
                    </p>
                </div>
            </div>
            <div style="background:rgba(2,6,23,0.85);padding:14px 22px;display:flex;flex-direction:column;gap:8px;">
                <div style="display:flex;align-items:center;gap:10px;background:rgba(239,68,68,0.08);border:1px solid rgba(239,68,68,0.2);border-radius:10px;padding:10px 14px;">
                    <i class="fas fa-flag" style="color:#ef4444;flex-shrink:0;"></i>
                    <span style="color:#fca5a5;font-size:13px;font-weight:700;">"Can you send the funds to Mexico?" ‚Äî End call professionally &amp; move on</span>
                </div>
                <div style="display:flex;align-items:center;gap:10px;background:rgba(239,68,68,0.08);border:1px solid rgba(239,68,68,0.2);border-radius:10px;padding:10px 14px;">
                    <i class="fas fa-flag" style="color:#ef4444;flex-shrink:0;"></i>
                    <span style="color:#fca5a5;font-size:13px;font-weight:700;">Any mention of Mexico as a business location or fund destination ‚Äî End call &amp; move on</span>
                </div>
                <div style="display:flex;align-items:center;gap:10px;background:rgba(239,68,68,0.08);border:1px solid rgba(239,68,68,0.2);border-radius:10px;padding:10px 14px;">
                    <i class="fas fa-flag" style="color:#ef4444;flex-shrink:0;"></i>
                    <span style="color:#fca5a5;font-size:13px;font-weight:700;">Requesting wire transfer or cash to international account ‚Äî End call &amp; move on</span>
                </div>
                <p style="color:#64748b;font-size:10px;font-weight:900;text-transform:uppercase;letter-spacing:0.1em;text-align:center;margin-top:4px;">This is an ongoing scam targeting our reps. Do not transfer under any circumstances.</p>
            </div>
        </div>

        <!-- ONLYFANS PRANK -->
        <div style="border-radius:16px;overflow:hidden;border:2px solid #f97316;background:rgba(249,115,22,0.06);">
            <div style="background:linear-gradient(135deg,rgba(249,115,22,0.25),rgba(194,65,12,0.35));padding:16px 20px;display:flex;align-items:center;gap:12px;">
                <span style="font-size:1.5rem;">üîû</span>
                <div>
                    <div style="font-family:Orbitron,sans-serif;font-size:10px;font-weight:900;text-transform:uppercase;letter-spacing:0.15em;color:#f97316;">Instant Disqualifier ‚Äî End Call Professionally</div>
                    <div style="font-family:Orbitron,sans-serif;font-size:15px;font-weight:900;text-transform:uppercase;color:white;margin-top:2px;">OnlyFans = Prank. Full Stop.</div>
                </div>
            </div>
            <div style="padding:14px 20px;display:flex;flex-direction:column;gap:8px;">
                <p style="color:#cbd5e1;font-size:13px;font-weight:600;line-height:1.6;">If anyone gives <span style="color:white;font-weight:900;">"OnlyFans"</span> as their business name or says they run an OnlyFans account ‚Äî end the call professionally and move on immediately. This is a prank. We do not work with adult content platforms, and no legitimate business loan applicant would list this as their company. Don't engage, don't try to qualify them further.</p>
                <div style="display:flex;align-items:center;gap:10px;background:rgba(249,115,22,0.08);border:1px solid rgba(249,115,22,0.25);border-radius:10px;padding:10px 14px;margin-top:4px;">
                    <i class="fas fa-flag" style="color:#f97316;flex-shrink:0;"></i>
                    <span style="color:#fed7aa;font-size:13px;font-weight:700;">"My business is OnlyFans" ‚Äî End call professionally &amp; move on</span>
                </div>
                <div style="display:flex;align-items:center;gap:10px;background:rgba(249,115,22,0.08);border:1px solid rgba(249,115,22,0.25);border-radius:10px;padding:10px 14px;">
                    <i class="fas fa-flag" style="color:#f97316;flex-shrink:0;"></i>
                    <span style="color:#fed7aa;font-size:13px;font-weight:700;">"I'm a content creator on OnlyFans" ‚Äî End call professionally &amp; move on</span>
                </div>
            </div>
        </div>

        <!-- PRANK RED FLAGS -->
        <div class="glass p-6 rounded-3xl border-l-8 border-l-purple-500 bg-purple-500/5">
            <h3 class="header-font text-sm md:text-xl font-black text-purple-400 uppercase mb-2 italic">üö® Prank Caller Red Flags</h3>
            <p class="text-xs text-slate-500 uppercase font-black tracking-widest mb-5">Spot these signs early ‚Äî end the call professionally and move on</p>
            <div class="text-sm md:text-base leading-relaxed text-slate-200 space-y-4">

                <div class="glass p-4 rounded-2xl border border-purple-900/40 bg-purple-900/10">
                    <p class="text-purple-300 font-black uppercase text-xs tracking-widest mb-2">1. Yes to Everything</p>
                    <p class="text-slate-300 text-sm">A real business owner will ask questions, push back, or need a moment to think. If someone says <span class="text-white font-black">"yes"</span> instantly to every single question ‚Äî business type, revenue, ownership, years open ‚Äî without any hesitation, they are not a real lead. Real owners don't always have the answer ready. Prankers agree to everything to see how far they can get.</p>
                    <p class="text-yellow-400 font-black text-xs mt-2 uppercase">Watch for: zero hesitation, perfect answers, robotic "yes yes yes"</p>
                </div>

                <div class="glass p-4 rounded-2xl border border-purple-900/40 bg-purple-900/10">
                    <p class="text-purple-300 font-black uppercase text-xs tracking-widest mb-2">2. Generic or Unverifiable Business Name</p>
                    <p class="text-slate-300 text-sm">When you ask the business name and they give something vague like <span class="text-white font-black">"John's Business," "My Company," "Business LLC,"</span> or something that sounds made up on the spot ‚Äî that's a red flag. Real owners say their business name with confidence. Ask them to spell it out. If they hesitate or change it, it's fake.</p>
                    <p class="text-yellow-400 font-black text-xs mt-2 uppercase">Watch for: "um‚Ä¶ it's called‚Ä¶ like‚Ä¶ my business," names that change when repeated back</p>
                </div>

                <div class="glass p-4 rounded-2xl border border-purple-900/40 bg-purple-900/10">
                    <p class="text-purple-300 font-black uppercase text-xs tracking-widest mb-2">3. Asking for Money or Reversing the Script</p>
                    <p class="text-slate-300 text-sm">If they flip the call and start asking <span class="text-white font-black">"So how much will YOU give me?"</span> or <span class="text-white font-black">"When can I get the money?"</span> before you've even qualified them ‚Äî they're trying to waste your time or play a game. Legitimate leads understand there's a qualification process first.</p>
                    <p class="text-yellow-400 font-black text-xs mt-2 uppercase">Watch for: "just send it," "how fast can I get it," "give me the max"</p>
                </div>

                <div class="glass p-4 rounded-2xl border border-purple-900/40 bg-purple-900/10">
                    <p class="text-purple-300 font-black uppercase text-xs tracking-widest mb-2">4. Laughing, Whispering, or Coached Answers</p>
                    <p class="text-slate-300 text-sm">If you hear <span class="text-white font-black">giggling, muffled laughter, or someone whispering answers</span> to them in the background, end the call. This is a group prank where multiple people are listening. Sometimes you'll hear a pause then they repeat what someone else just said to them word for word. Real owners are alone or in a quiet office environment.</p>
                    <p class="text-yellow-400 font-black text-xs mt-2 uppercase">Watch for: echoing, whispering, covering the phone, sudden "hold on" with background noise</p>
                </div>

                <div class="glass p-4 rounded-2xl border border-purple-900/40 bg-purple-900/10">
                    <p class="text-purple-300 font-black uppercase text-xs tracking-widest mb-2">5. Inconsistent or Absurd Details</p>
                    <p class="text-slate-300 text-sm">Ask the business name ‚Äî then ask again a minute later. If it changed, that's a prank. Or they give a revenue of <span class="text-white font-black">$50 million</span> but say they've been open <span class="text-white font-black">2 months</span>. Numbers that don't add up, industries that don't make sense, addresses in random states with local area codes ‚Äî real owners are consistent because they live their business every day.</p>
                    <p class="text-yellow-400 font-black text-xs mt-2 uppercase">Watch for: contradictory info, impossible numbers, changing their story</p>
                </div>

                <div class="glass p-4 rounded-2xl border border-purple-900/40 bg-purple-900/10">
                    <p class="text-purple-300 font-black uppercase text-xs tracking-widest mb-2">6. Refuses to Stay On Topic</p>
                    <p class="text-slate-300 text-sm">Prankers love to <span class="text-white font-black">derail the call</span> ‚Äî making jokes, asking unrelated questions, or being purposely difficult to string you along. They want to waste 10 minutes of your time for laughs. If you've redirected them twice and they still won't engage seriously, that's your sign. Don't try to save the call ‚Äî end it professionally and protect your time.</p>
                    <p class="text-yellow-400 font-black text-xs mt-2 uppercase">Watch for: random tangents, jokes about the call, refusing to answer direct questions</p>
                </div>

                <div class="glass p-4 rounded-2xl border border-purple-900/40 bg-purple-900/10">
                    <p class="text-purple-300 font-black uppercase text-xs tracking-widest mb-2">7. Suspicious Tone &amp; Energy</p>
                    <p class="text-slate-300 text-sm">Real business owners are usually <span class="text-white font-black">busy, slightly guarded, and professional</span> ‚Äî even if skeptical. A prank caller often sounds <span class="text-white font-black">too casual, overly excited, or flat and robotic</span>. If the energy feels off ‚Äî too eager, too silly, or suspiciously perfect ‚Äî trust your instinct. Your gut is trained from every real call you've taken. Use it.</p>
                    <p class="text-yellow-400 font-black text-xs mt-2 uppercase">Watch for: overly enthusiastic, bored monotone, giggling energy, acting performance</p>
                </div>

            </div>
        </div>

        <!-- KEYWORDS TO LISTEN FOR -->
        <div class="glass p-6 rounded-3xl border-l-8 border-l-yellow-500 bg-yellow-500/5">
            <h3 class="header-font text-sm md:text-xl font-black text-yellow-400 uppercase mb-2 italic">üîë Prank Keywords &amp; Phrases</h3>
            <p class="text-xs text-slate-500 uppercase font-black tracking-widest mb-5">The moment you hear these ‚Äî stay alert or end the call</p>
            <div class="space-y-3">
                <div style="background:rgba(234,179,8,0.08);border:1px solid rgba(234,179,8,0.25);border-radius:12px;padding:14px 16px;">
                    <p class="text-yellow-400 font-black text-xs uppercase tracking-widest mb-2">üö© Immediate Red Flags ‚Äî End Call</p>
                    <div class="flex flex-wrap gap-2 mt-1">
                        <span style="background:rgba(239,68,68,0.15);border:1px solid rgba(239,68,68,0.3);border-radius:20px;padding:3px 10px;font-size:11px;font-weight:700;color:#fca5a5;">"Send it to Mexico"</span>
                        <span style="background:rgba(239,68,68,0.15);border:1px solid rgba(239,68,68,0.3);border-radius:20px;padding:3px 10px;font-size:11px;font-weight:700;color:#fca5a5;">"Wire the money"</span>
                        <span style="background:rgba(239,68,68,0.15);border:1px solid rgba(239,68,68,0.3);border-radius:20px;padding:3px 10px;font-size:11px;font-weight:700;color:#fca5a5;">"Give me the cash"</span>
                        <span style="background:rgba(239,68,68,0.15);border:1px solid rgba(239,68,68,0.3);border-radius:20px;padding:3px 10px;font-size:11px;font-weight:700;color:#fca5a5;">"I need it today"</span>
                        <span style="background:rgba(239,68,68,0.15);border:1px solid rgba(239,68,68,0.3);border-radius:20px;padding:3px 10px;font-size:11px;font-weight:700;color:#fca5a5;">"How much can you give me?"</span>
                        <span style="background:rgba(239,68,68,0.15);border:1px solid rgba(239,68,68,0.3);border-radius:20px;padding:3px 10px;font-size:11px;font-weight:700;color:#fca5a5;">"Send it internationally"</span>
                        <span style="background:rgba(239,68,68,0.15);border:1px solid rgba(239,68,68,0.3);border-radius:20px;padding:3px 10px;font-size:11px;font-weight:700;color:#fca5a5;">"My business is called‚Ä¶ uh‚Ä¶"</span>
                    </div>
                </div>
                <div style="background:rgba(234,179,8,0.06);border:1px solid rgba(234,179,8,0.2);border-radius:12px;padding:14px 16px;">
                    <p class="text-yellow-400 font-black text-xs uppercase tracking-widest mb-2">‚ö†Ô∏è Proceed With Caution</p>
                    <div class="flex flex-wrap gap-2 mt-1">
                        <span style="background:rgba(234,179,8,0.12);border:1px solid rgba(234,179,8,0.3);border-radius:20px;padding:3px 10px;font-size:11px;font-weight:700;color:#fde68a;">"Yeah, yeah, whatever you need"</span>
                        <span style="background:rgba(234,179,8,0.12);border:1px solid rgba(234,179,8,0.3);border-radius:20px;padding:3px 10px;font-size:11px;font-weight:700;color:#fde68a;">"I own everything 100%"</span>
                        <span style="background:rgba(234,179,8,0.12);border:1px solid rgba(234,179,8,0.3);border-radius:20px;padding:3px 10px;font-size:11px;font-weight:700;color:#fde68a;">"We make millions"</span>
                        <span style="background:rgba(234,179,8,0.12);border:1px solid rgba(234,179,8,0.3);border-radius:20px;padding:3px 10px;font-size:11px;font-weight:700;color:#fde68a;">"Just approve me"</span>
                        <span style="background:rgba(234,179,8,0.12);border:1px solid rgba(234,179,8,0.3);border-radius:20px;padding:3px 10px;font-size:11px;font-weight:700;color:#fde68a;">"I've been in business forever"</span>
                        <span style="background:rgba(234,179,8,0.12);border:1px solid rgba(234,179,8,0.3);border-radius:20px;padding:3px 10px;font-size:11px;font-weight:700;color:#fde68a;">"Can you just skip that part?"</span>
                        <span style="background:rgba(234,179,8,0.12);border:1px solid rgba(234,179,8,0.3);border-radius:20px;padding:3px 10px;font-size:11px;font-weight:700;color:#fde68a;">"What's the minimum I qualify for?"</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- TONE GUIDE -->
        <div class="glass p-6 rounded-3xl border-l-8 border-l-blue-400 bg-blue-500/5">
            <h3 class="header-font text-sm md:text-xl font-black text-blue-400 uppercase mb-2 italic">üéôÔ∏è Tone &amp; Voice Tells</h3>
            <p class="text-xs text-slate-500 uppercase font-black tracking-widest mb-5">What a real owner sounds like vs. a prank caller</p>
            <div class="grid grid-cols-1 gap-3">
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
                    <div style="background:rgba(34,197,94,0.08);border:1px solid rgba(34,197,94,0.25);border-radius:12px;padding:14px;">
                        <p class="text-green-400 font-black text-xs uppercase tracking-widest mb-3">‚úÖ Real Owner Sounds Like</p>
                        <ul class="space-y-2 text-slate-300 text-xs font-semibold">
                            <li>‚Ä¢ Slightly busy or distracted</li>
                            <li>‚Ä¢ Asks "what is this for exactly?"</li>
                            <li>‚Ä¢ Pauses to recall their revenue</li>
                            <li>‚Ä¢ Says their business name confidently</li>
                            <li>‚Ä¢ Skeptical but willing to listen</li>
                            <li>‚Ä¢ Professional, measured tone</li>
                            <li>‚Ä¢ Asks about the process / next steps</li>
                            <li>‚Ä¢ Background sounds like a real workplace</li>
                        </ul>
                    </div>
                    <div style="background:rgba(239,68,68,0.08);border:1px solid rgba(239,68,68,0.25);border-radius:12px;padding:14px;">
                        <p class="text-red-400 font-black text-xs uppercase tracking-widest mb-3">üö® Prank Caller Sounds Like</p>
                        <ul class="space-y-2 text-slate-300 text-xs font-semibold">
                            <li>‚Ä¢ Too casual or too excited</li>
                            <li>‚Ä¢ Agrees to everything instantly</li>
                            <li>‚Ä¢ Never hesitates on any answer</li>
                            <li>‚Ä¢ Gives absurd or vague business name</li>
                            <li>‚Ä¢ Giggles or sounds entertained</li>
                            <li>‚Ä¢ Flat robotic tone like reading a script</li>
                            <li>‚Ä¢ Keeps pushing for the money amount</li>
                            <li>‚Ä¢ Background sounds like a group or party</li>
                        </ul>
                    </div>
                </div>
            </div>
            <p class="text-slate-500 font-black italic mt-5 border-t border-white/5 pt-4 uppercase text-center text-xs">End the call professionally: <span class="text-white">"Thank you for your time, we're not able to proceed at this time. Have a great day."</span></p>
        </div>


    </div>

</div>

<script>
const API_URL = 'https://script.google.com/macros/s/AKfycbxEz0oA-FRcZ9c0lp18bKbBLZZbGW3sGba0PBaoIynMz_qaF6mCfs4KzYuY6HdOmlzwZw/exec';
const WEEKLY_PASSWORD = 'bizlevelup2025';
const DAY_SHORT = ['Mon','Tue','Wed','Thu','Fri','Sat'];
const DAY_FULL  = ['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];

let agents = [], dayHistory = [];
let currentTab = 'daily', currentDayView = 'today', weeklyUnlocked = false;
let lookupHistory = [];
try { lookupHistory = JSON.parse(localStorage.getItem('bizlookup_history') || '[]'); } catch(e) {}

function getTeam(name) { return (!name) ? 'PR' : name.trim().startsWith('GYB') ? 'BB' : 'PR'; }

async function updateDashboard() {
    const btn = document.getElementById('refresh-btn');
    btn.classList.add('spin-anim');
    try {
        const res = await fetch(API_URL);
        agents = await res.json();
        agents.forEach(a => { if (!a.team) a.team = getTeam(a.name); });
        if (agents.length > 0) {
            if (agents[0].dayHistory) dayHistory = agents[0].dayHistory;
            dayHistory.forEach(d => { d.agents.forEach(a => { if (!a.team) a.team = getTeam(a.name); }); });
        }
        if (agents.length > 0 && !agents[0].prTotal && !agents[0].bbTotal) {
            let pr = 0, bb = 0;
            agents.forEach(a => { if (a.team==='PR') pr+=(a.dailyLeads||0); else bb+=(a.dailyLeads||0); });
            agents[0].prTotal = pr; agents[0].bbTotal = bb;
        }
        render(); renderDaySubTabs();
        document.getElementById('timestamp').innerText = 'Live: ' + new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit',second:'2-digit'});
    } catch(e) { document.getElementById('timestamp').innerText = 'System Offline'; }
    finally { setTimeout(() => btn.classList.remove('spin-anim'), 1000); }
}

function renderDaySubTabs() {
    const wrapper = document.getElementById('day-sub-tabs-wrapper');
    const container = document.getElementById('day-sub-tabs-container');
    if (currentTab !== 'daily') { wrapper.classList.add('hidden'); return; } // prank/lookup/playbook/weekly all hide sub-tabs
    if (!dayHistory.length) { wrapper.classList.add('hidden'); return; }
    let html = '<button onclick="switchDayView(\'today\')" class="day-sub-tab is-today ' + (currentDayView==='today'?'active':'') + '">Today</button>';
    dayHistory.forEach(d => {
        html += '<button onclick="switchDayView(' + d.day + ')" class="day-sub-tab is-history ' + (currentDayView===d.day?'active':'') + '">' + DAY_SHORT[d.day] + '<span class="history-dot"></span></button>';
    });
    container.innerHTML = html;
    wrapper.classList.remove('hidden');
}
function switchDayView(key) { currentDayView = key; renderDaySubTabs(); render(); }

function requestWeekly() {
    if (weeklyUnlocked) { currentTab='weekly'; updateTabUI(); render(); renderDaySubTabs(); return; }
    document.getElementById('pw-modal').classList.remove('hidden');
    document.getElementById('pw-input').value = '';
    document.getElementById('pw-error').innerText = '';
    document.getElementById('pw-input').classList.remove('error');
    setTimeout(() => document.getElementById('pw-input').focus(), 100);
}
function checkPassword() {
    if (document.getElementById('pw-input').value === WEEKLY_PASSWORD) {
        weeklyUnlocked = true;
        document.getElementById('pw-modal').classList.add('hidden');
        document.getElementById('tab-weekly').innerHTML = 'Weekly';
        currentTab = 'weekly'; currentDayView = 'today';
        updateTabUI(); render(); renderDaySubTabs();
    } else {
        const inp = document.getElementById('pw-input');
        inp.classList.add('error');
        document.getElementById('pw-error').innerText = 'Incorrect access code. Try again.';
        inp.value = '';
        setTimeout(() => inp.classList.remove('error'), 500);
        setTimeout(() => inp.focus(), 100);
    }
}
function cancelPassword() { document.getElementById('pw-modal').classList.add('hidden'); }

function switchTab(tab) {
    if (tab === 'weekly') { requestWeekly(); return; }
    currentTab = tab; currentDayView = 'today';
    updateTabUI(); render(); renderDaySubTabs();
    if (tab === 'lookup') renderLookupHistory();
}
function updateTabUI() {
    ['daily','lookup','playbook','prank','weekly'].forEach(t => {
        const b = document.getElementById('tab-' + t);
        if (b) b.className = 'flex-1 glass py-3 rounded-xl text-[10px] md:text-sm font-black uppercase tracking-widest transition-all ' + (t===currentTab ? 'tab-active' : 'text-slate-500');
    });
}

function getLevel(l) {
    if (l>=17) return {title:'CONQUEROR',cls:'conqueror-tier',color:'text-red-500'};
    if (l>=12) return {title:'MASTER',   cls:'gold-tier',     color:'text-yellow-500'};
    if (l>=7)  return {title:'ELITE',    cls:'orange-tier',   color:'text-orange-500'};
    if (l>=4)  return {title:'PRO',      cls:'blue-tier',     color:'text-blue-500'};
    return            {title:'ROOKIE',   cls:'slate-tier',    color:'text-slate-500'};
}

function render() {
    const lView  = document.getElementById('leaderboard-view');
    const pView  = document.getElementById('playbook-view');
    const luView = document.getElementById('lookup-view');
    const prView = document.getElementById('prank-view');
    lView.classList.add('hidden');
    pView.classList.add('hidden');
    luView.classList.add('hidden');
    if (prView) prView.classList.add('hidden');
    if (currentTab==='playbook') { pView.classList.remove('hidden'); return; }
    if (currentTab==='lookup')   { luView.classList.remove('hidden'); return; }
    if (currentTab==='prank')    { if (prView) prView.classList.remove('hidden'); return; }
    lView.classList.remove('hidden');

    const isWeekly  = currentTab === 'weekly';
    const isHistory = currentTab === 'daily' && currentDayView !== 'today';
    const target    = isWeekly ? 800 : 150;
    const todayName = agents.length > 0 ? (agents[0].todayName || 'Today') : 'Today';
    const banner    = document.getElementById('history-banner');

    if (isHistory) {
        const snap = dayHistory.find(d => d.day === currentDayView);
        document.getElementById('history-banner-text').innerText = 'Viewing ' + (snap ? snap.dayName : DAY_FULL[currentDayView]) + ' ‚Äî Final Results';
        banner.classList.remove('hidden');
    } else { banner.classList.add('hidden'); }

    document.getElementById('goal-label').innerText    = isWeekly ? 'Weekly Team Goal' : isHistory ? DAY_FULL[currentDayView] + ' Final' : todayName + ' Daily Goal';
    document.getElementById('target-display').innerText = 'Target: ' + target;
    document.getElementById('day-indicator').innerText  = isWeekly ? 'Weekly Sprint' : isHistory ? DAY_SHORT[currentDayView] + ' ‚Äî Completed' : todayName + ' Performance';

    let displayData = [], prTotal = 0, bbTotal = 0;
    if (isHistory) {
        const snap = dayHistory.find(d => d.day === currentDayView);
        if (snap) {
            displayData = [...snap.agents].sort((a,b) => b.leads-a.leads);
            prTotal = snap.prTotal||0; bbTotal = snap.bbTotal||0;
            if (!prTotal && !bbTotal) displayData.forEach(a => { if(a.team==='PR') prTotal+=a.leads; else bbTotal+=a.leads; });
        }
    } else {
        displayData = agents.map(a => ({name:a.name,leads:isWeekly?(a.weeklyLeads||0):(a.dailyLeads||0),team:a.team||getTeam(a.name)})).sort((a,b)=>b.leads-a.leads);
        if (isWeekly) { displayData.forEach(a => { if(a.team==='PR') prTotal+=a.leads; else bbTotal+=a.leads; }); }
        else if (agents.length > 0) {
            prTotal = agents[0].prTotal||0; bbTotal = agents[0].bbTotal||0;
            if (!prTotal && !bbTotal) displayData.forEach(a => { if(a.team==='PR') prTotal+=a.leads; else bbTotal+=a.leads; });
        }
    }

    let totalLeads=0, masters=0, activeReps=0;
    document.getElementById('leaderboard').innerHTML = displayData.map((agent,i) => {
        const lvl = getLevel(agent.leads);
        totalLeads+=agent.leads; if(agent.leads>=12) masters++; if(agent.leads>0) activeReps++;
        const badge = agent.team==='PR'
            ? '<span style="font-size:8px;background:rgba(167,139,250,0.15);border:1px solid rgba(167,139,250,0.3);border-radius:4px;padding:1px 5px;color:#a78bfa;font-weight:900;margin-left:6px;">PROV</span>'
            : '<span style="font-size:8px;background:rgba(192,132,252,0.15);border:1px solid rgba(192,132,252,0.3);border-radius:4px;padding:1px 5px;color:#c084fc;font-weight:900;margin-left:6px;">BERB</span>';
        return '<div class="glass p-5 rounded-2xl flex justify-between items-center transition-all hover:bg-white/5 '+lvl.cls+' mb-3 md:mb-0 md:m-2">'
            +'<div class="flex items-center gap-4">'
            +'<span class="text-xl font-black italic '+(i<3?'text-white':'text-slate-700')+'">'+String(i+1).padStart(2,'0')+'</span>'
            +'<div><div class="font-black text-sm md:text-lg text-white uppercase flex items-center flex-wrap gap-1">'+agent.name+badge+'</div>'
            +'<div class="text-[9px] font-black uppercase tracking-widest '+lvl.color+'">'+lvl.title+' STATUS</div></div></div>'
            +'<div class="text-right"><div class="text-2xl md:text-3xl font-black text-white leading-none">'+agent.leads+'</div>'
            +'<div class="text-[8px] text-slate-500 uppercase font-black mt-1">Transfers</div></div></div>';
    }).join('');

    document.getElementById('floor-total').innerText       = totalLeads;
    document.getElementById('master-count').innerText      = String(masters).padStart(2,'0');
    document.getElementById('active-reps').innerText       = activeReps;
    document.getElementById('current-leads-sum').innerText = totalLeads+' Leads';
    document.getElementById('pr-count').innerText          = prTotal;
    document.getElementById('bb-count').innerText          = bbTotal;
    const pct = Math.min((totalLeads/target)*100,100);
    document.getElementById('progress-bar').style.width = pct+'%';
    document.getElementById('goal-percent').innerText    = Math.floor(pct)+'%';
}

// ‚îÄ‚îÄ PRANK DETECTION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function detectPrank(query) {
    const q = query.trim().toLowerCase();
    const reasons = [];
    let score = 0;
    const isPhone = /^[\d\s\-\(\)\+\.]+$/.test(query) && query.replace(/\D/g,'').length >= 7;
    if (isPhone) {
        const d = query.replace(/\D/g,'');
        if (/^(\d)\1+$/.test(d))                               { score+=85; reasons.push('All same digits ‚Äî clearly fake number'); }
        if (['1234567890','0987654321','1234567'].some(s=>d.includes(s.slice(0,7)))) { score+=70; reasons.push('Sequential digits ‚Äî common fake number'); }
        if (['0000000000','1111111111','1234567890','9999999999'].includes(d))        { score+=90; reasons.push('Known placeholder/test phone number'); }
    }
    const fictional = ['dunder mifflin','umbrella corp','initech','globex','vandelay','acme corp','nakatomi','aperture','wayne enterprises','stark industries'];
    if (fictional.some(f=>q.includes(f)))                     { score+=95; reasons.push('Fictional company name detected'); }
    if (/^[a-z]{1,3}$/.test(q))                               { score+=85; reasons.push('Too short to be a real business name'); }
    if (/(.)\1{3,}/.test(q))                                  { score+=75; reasons.push('Repeated characters ‚Äî keyboard mashing'); }
    if (/^(asdf|qwer|zxcv|test|fake|blah|lol|haha)/.test(q)) { score+=90; reasons.push('Nonsense or test input'); }
    ['business name','company name','my business','test business','sample','placeholder'].forEach(p => { if(q.includes(p)){score+=88;reasons.push('Generic placeholder name');} });
    ['money inc','cash cash','big bucks','easy money','get rich','bank of nigeria','free money'].forEach(j => { if(q.includes(j)){score+=80;reasons.push('Matches known scam/joke phrase');} });
    if (/[!@#$%^&*]{2,}/.test(query))                         { score+=60; reasons.push('Excessive special characters'); }
    const words = q.split(/\s+/).filter(Boolean);
    if (words.length>1 && new Set(words).size===1)             { score+=75; reasons.push('All words identical ‚Äî suspicious'); }
    score = Math.min(score,100);
    return { prankScore:score, prankReasons:reasons, prankVerdict: score>=80?'definite_prank':score>=56?'likely_prank':score>=26?'suspicious':'clean' };
}

// ‚îÄ‚îÄ LOOKUP ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function isPhoneNum(q) { return /^[\d\s\-\(\)\+\.]+$/.test(q) && q.replace(/\D/g,'').length >= 7; }

function buildQuery(q) {
    if (isPhoneNum(q)) {
        return 'For the phone number '+q+', give me: the business name, the name of the owner, the address, and email if possible';
    }
    return 'For the business "'+q+'", give me: the business name, the name of the owner, the address, and email if possible';
}

function runLookup() {
    const q = document.getElementById('lookup-input').value.trim();
    if (!q) { document.getElementById('lookup-input').focus(); return; }
    const prank = detectPrank(q);
    showPrankResult(prank);
    const entry = { query:q, prankScore:prank.prankScore, prankVerdict:prank.prankVerdict, prankReasons:prank.prankReasons, timestamp:new Date().toISOString() };
    lookupHistory.unshift(entry);
    if (lookupHistory.length>15) lookupHistory=lookupHistory.slice(0,15);
    try { localStorage.setItem('bizlookup_history',JSON.stringify(lookupHistory)); } catch(e){}
    renderLookupHistory();
    openSite('google');
}

function openSite(site) {
    const q = document.getElementById('lookup-input').value.trim();
    if (!q) { document.getElementById('lookup-input').focus(); return; }
    const isPhone = isPhoneNum(q);
    const digits  = q.replace(/\D/g,'');
    const gq      = buildQuery(q);
    const urls = {
        // udm=50 triggers Google AI Mode
        google:      'https://www.google.com/search?q='+encodeURIComponent(gq)+'&udm=50',
        bing:        'https://www.bing.com/search?q='+encodeURIComponent(gq)+'&showconv=1',
        yellowpages: isPhone ? 'https://www.yellowpages.com/phone-lookup?phone='+digits : 'https://www.yellowpages.com/search?search_terms='+encodeURIComponent(q)+'&geo_location_terms=United+States',
        whitepages:  isPhone ? 'https://www.whitepages.com/phone/'+digits               : 'https://www.whitepages.com/business/'+encodeURIComponent(q),
        yelp:        'https://www.yelp.com/search?find_desc='+encodeURIComponent(q)+'&find_loc=United+States',
        '411':       isPhone ? 'https://www.411.com/phone/'+digits                       : 'https://www.411.com/business/search?q='+encodeURIComponent(q)
    };
    if (urls[site]) window.open(urls[site], '_blank');
}

function showPrankResult(prank) {
    const el = document.getElementById('lookup-prank-result');
    if (!prank || prank.prankScore < 26) { el.classList.add('hidden'); el.innerHTML=''; return; }
    const s = prank.prankScore;
    const isD=s>=80, isP=s>=56;
    const label  = isD ? 'üö® DEFINITE PRANK ‚Äî END CALL &amp; MOVE ON' : isP ? '‚ö†Ô∏è LIKELY PRANK ‚Äî PROCEED WITH CAUTION' : 'üëÄ SUSPICIOUS ‚Äî VERIFY CAREFULLY';
    const color  = isD ? '#ef4444' : isP ? '#f97316' : '#eab308';
    const bg     = isD ? 'linear-gradient(135deg,rgba(239,68,68,0.22),rgba(185,28,28,0.32))' : isP ? 'linear-gradient(135deg,rgba(249,115,22,0.18),rgba(194,65,12,0.28))' : 'linear-gradient(135deg,rgba(234,179,8,0.14),rgba(161,98,7,0.24))';
    const rHTML  = (prank.prankReasons||[]).map(r =>
        '<div style="display:flex;align-items:center;gap:8px;background:rgba(239,68,68,0.06);border:1px solid rgba(239,68,68,0.15);border-radius:8px;padding:8px 12px;">'
        +'<i class="fas fa-flag" style="color:'+color+';font-size:10px;flex-shrink:0;"></i>'
        +'<span style="font-size:12px;color:#fca5a5;font-weight:700;">'+escapeHtml(r)+'</span></div>'
    ).join('');
    el.innerHTML =
        '<div style="border-radius:18px;overflow:hidden;border:2px solid '+color+';box-shadow:0 0 30px '+color+'44;animation:fadeSlideIn 0.3s ease-out;">'
        +'<div style="background:'+bg+';padding:18px 20px;border-bottom:1px solid '+color+'30;position:relative;overflow:hidden;">'
        +'<div style="position:absolute;inset:0;background:repeating-linear-gradient(45deg,transparent,transparent 10px,'+color+'08 10px,'+color+'08 20px);"></div>'
        +'<div style="position:relative;display:flex;align-items:center;gap:14px;">'
        +'<div style="width:58px;height:58px;border-radius:50%;background:conic-gradient('+color+' '+s+'%,rgba(255,255,255,0.04) '+s+'%);display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0;">'
        +'<div style="position:absolute;inset:6px;border-radius:50%;background:#020617;"></div>'
        +'<span style="position:relative;z-index:1;font-family:Orbitron,sans-serif;font-weight:900;font-size:0.9rem;color:'+color+';">'+s+'</span></div>'
        +'<div><div style="font-family:Orbitron,sans-serif;font-size:10px;font-weight:900;text-transform:uppercase;letter-spacing:0.1em;color:'+color+';margin-bottom:3px;">'+label+'</div>'
        +'<div style="font-size:10px;color:#94a3b8;font-weight:700;">Prank Risk Score: <span style="color:'+color+';font-weight:900;">'+s+'/100</span></div>'
        +'</div></div></div>'
        +(rHTML?'<div style="background:rgba(2,6,23,0.75);padding:14px;display:flex;flex-direction:column;gap:6px;">'+rHTML+'</div>':'')
        +'</div>';
    el.classList.remove('hidden');
}

function clearLookup() {
    document.getElementById('lookup-input').value='';
    const pr=document.getElementById('lookup-prank-result');
    if(pr){pr.classList.add('hidden');pr.innerHTML='';}
    document.getElementById('lookup-input').focus();
}

function renderLookupHistory() {
    const sec=document.getElementById('lookup-history-section');
    const con=document.getElementById('lookup-history');
    if (!lookupHistory.length) { sec.classList.add('hidden'); return; }
    sec.classList.remove('hidden');
    con.innerHTML = lookupHistory.map((h,i) => {
        const ago=timeAgo(new Date(h.timestamp)), s=h.prankScore||0;
        const badge = s>=80
            ? '<span style="font-size:9px;font-weight:900;background:rgba(239,68,68,0.15);color:#ef4444;border:1px solid rgba(239,68,68,0.3);border-radius:20px;padding:2px 7px;margin-left:6px;">üö® PRANK</span>'
            : s>=56 ? '<span style="font-size:9px;font-weight:900;background:rgba(249,115,22,0.15);color:#f97316;border:1px solid rgba(249,115,22,0.3);border-radius:20px;padding:2px 7px;margin-left:6px;">‚ö†Ô∏è SUSPECT</span>'
            : s>=26 ? '<span style="font-size:9px;font-weight:900;background:rgba(234,179,8,0.15);color:#eab308;border:1px solid rgba(234,179,8,0.3);border-radius:20px;padding:2px 7px;margin-left:6px;">üëÄ CHECK</span>'
            : '';
        return '<div class="search-history-item" onclick="reloadHistory('+i+')">'
            +'<div><div class="font-black text-sm text-white">'+escapeHtml(h.query)+badge+'</div>'
            +'<div class="text-[10px] text-slate-600 font-bold mt-0.5 uppercase tracking-wide">'+ago+'</div></div>'
            +'<i class="fas fa-chevron-right text-slate-700 text-xs"></i></div>';
    }).join('');
}

function reloadHistory(i) {
    const h=lookupHistory[i]; if(!h) return;
    document.getElementById('lookup-input').value=h.query;
    showPrankResult({prankScore:h.prankScore||0,prankReasons:h.prankReasons||[],prankVerdict:h.prankVerdict||'clean'});
}
function clearHistory() {
    lookupHistory=[];
    try{localStorage.setItem('bizlookup_history','[]');}catch(e){}
    renderLookupHistory();
}

function timeAgo(date) {
    const m=Math.floor((Date.now()-date.getTime())/60000);
    if(m<1) return 'Just now';
    if(m<60) return m+'m ago';
    const h=Math.floor(m/60);
    if(h<24) return h+'h ago';
    return Math.floor(h/24)+'d ago';
}
function escapeHtml(s) {
    return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}

updateDashboard();
setInterval(updateDashboard, 30000);
</script>
</body>
</html>
